<!DOCTYPE html>
<html lang="en-us"><head>
  <meta charset="utf-8">
  <title>Gandes Goldestan</title>

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="this is meta description">
  <meta name="author" content="Gandes Goldestan">
  <meta name="generator" content="Hugo 0.74.3" />

  <!-- plugins -->
  
  <link rel="stylesheet" href="https://gandesgold.com/plugins/bootstrap/bootstrap.min.css ">
  
  <link rel="stylesheet" href="https://gandesgold.com/plugins/slick/slick.css ">
  
  <link rel="stylesheet" href="https://gandesgold.com/plugins/themify-icons/themify-icons.css ">
  
  <link rel="stylesheet" href="https://gandesgold.com/plugins/venobox/venobox.css ">
  

  <!-- Main Stylesheet -->
  
  <link rel="stylesheet" href="https://gandesgold.com/scss/style.min.css" media="screen">

  <!--Favicon-->
  <link rel="shortcut icon" href="https://gandesgold.com/images/favicon.png " type="image/x-icon">
  <link rel="icon" href="https://gandesgold.com/images/favicon.png " type="image/x-icon">

  <!-- google analitycs -->
  <script>
    (function (i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r;
      i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date();
      a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-177321281-1', 'auto');
    ga('send', 'pageview');
  </script>

</head><body>
<!-- preloader start -->
<div class="preloader">
  
</div>
<!-- preloader end -->
<!-- navigation -->
<header class="navigation">
  <div class="container">
    
    <nav class="navbar navbar-expand-lg navbar-white bg-transparent border-bottom pl-0">
      <a class="navbar-brand mobile-view" href="https://gandesgold.com"><img class="img-fluid"
          src="https://gandesgold.com/images/logo1.png" alt="Gandes Goldestan"></a>
      <button class="navbar-toggler border-0" type="button" data-toggle="collapse" data-target="#navigation">
        <i class="ti-menu h3"></i>
      </button>

      <div class="collapse navbar-collapse text-center" id="navigation">
        <div class="desktop-view">
          <ul class="navbar-nav mr-auto">
            
            <li class="nav-item">
              <a class="nav-link" href="mailto:gandes.goldestan@gmail.com"><i class="ti-email"></i></a>
            </li>
            
            <li class="nav-item">
              <a class="nav-link" href="https://www.twitter.com/gandesgold"><i class="ti-twitter-alt"></i></a>
            </li>
            
            <li class="nav-item">
              <a class="nav-link" href="https://www.github.com/gandesgold"><i class="ti-github"></i></a>
            </li>
            
            <li class="nav-item">
              <a class="nav-link" href="https://www.linkedin.com/in/gandesgold"><i class="ti-linkedin"></i></a>
            </li>
            
          </ul>
        </div>

        <a class="navbar-brand mx-auto desktop-view" href="https://gandesgold.com"><img class="img-fluid"
            src="https://gandesgold.com/images/logo1.png" alt="Gandes Goldestan"></a>

        <ul class="navbar-nav">
          
          
          <li class="nav-item">
            <a class="nav-link" href="https://www.gandesgold.com">Home</a>
          </li>
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="https://gandesgold.com/about">About</a>
          </li>
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="https://gandesgold.com/blog">Blog</a>
          </li>
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="https://public.tableau.com/profile/gandes.goldestan">Portfolio</a>
          </li>
          
          
        </ul>

        
        <!-- search -->
        <div class="search pl-lg-4">
          <button id="searchOpen" class="search-btn"><i class="ti-search"></i></button>
          <div class="search-wrapper">
            <form action="https://gandesgold.com/search" class="h-100">
              <input class="search-box px-4" id="search-query" name="s" type="search" placeholder="Type & Hit Enter...">
            </form>
            <button id="searchClose" class="search-close"><i class="ti-close text-dark"></i></button>
          </div>
        </div>
        

        
      </div>
    </nav>
  </div>
</header>
<!-- /navigation -->

<section class="section-sm">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 mx-auto">
        
        <a href="/categories/tips/tutorial"
          class="text-primary">Tips/ tutorial</a>
        
        <h2>How to Create Wordcloud Visualization with R</h2>
        <div class="mb-3 post-meta">
          
          
          <script src='https://kit.fontawesome.com/a076d05399.js' crossorigin='anonymous'></script>
                  <i class='fas fa-calendar-alt'></i>
          <span>10 September 2020</span>
          <span>  ●  Gandes Goldestan</span>
          
        </div>
        
        <img src="https://gandesgold.com/images/wordcloud.png" class="img-fluid w-100 mb-4" alt="How to Create Wordcloud Visualization with R">
        
        <div class="content mb-5">
          <p><em>My learning documentation about making word cloud as one of chart for data visualization in R</em></p>
<p>●  ●  ●</p>
<p>Last year, in July 2019 I attended a Data Science workshop which was provided by Indonesia Financial Authority (OJK). The lesson materials they provided are basic and good enough. One of them is about making a <a href="https://www.betterevaluation.org/en/evaluation-options/wordcloud#:~:text=Synonyms%3A,in%20the%20document(s)."><strong>word cloud</strong></a> visualization from text datasets with <a href="www.r-project.org">R</a>, which is example of <em>text mining</em> implementation. This one is an interesting part to me. To be honest, I little bit forgot about this material, so today I want to learn and remember it again and make its learning documentation. Beside of sharing, this documentation may be useful to me as reminder if I forget about the algorithm, libraries/packages, etc later.</p>
<p>Based on research of Yuping Jin, the basic layout algorithm in generating a word cloud is <strong>to estimate the frequency level of a keyword by their frequencies or categories. In principle, the font size of a word in the word cloud is determined by its appearing
frequency</strong>. You can read the paper for more detail <a href="https://www.sciencedirect.com/science/article/pii/S1877705817302230/pdf?md5=28be5977c85149319ac4d992edf3fc95&amp;pid=1-s2.0-S1877705817302230-main.pdf">here</a>.</p>
<p>The dataset used for generating word cloud is <strong>finance.csv</strong>. It consists of collection of people&rsquo;s comments about topic related to financial in Indonesian language.</p>
<p>For this learning, these are some R libraries we need to make a word cloud visualization:</p>
<ul>
<li>
<p><a href="https://cran.r-project.org/package=tm"><strong><code>tm</code></strong></a> : A Text Mining package which provides some powerful functions in text-processing steps and has methods such as importing data, handling corpus, metadata management, creation of term document matrices, and preprocessing methods.</p>
</li>
<li>
<p><a href="https://cran.r-project.org/package=SnowballC"><strong><code>SnowballC</code></strong></a> : An R interface to the C &lsquo;libstemmer&rsquo; library that implements Porter&rsquo;s word stemming algorithm for collapsing words to a common root to aid comparison of vocabulary.</p>
</li>
<li>
<p><a href="https://cran.r-project.org/package=wordcloud"><strong><code>wordcloud</code></strong></a> : A package which has functionality to create pretty word clouds, visualize differences and similarity between documents, and avoid over-plotting in scatter plots with text.</p>
</li>
<li>
<p><a href="https://cran.r-project.org/package=RColorBrewer"><strong><code>RColorBrewer</code></strong></a> : This package provides color schemes for maps (and other graphics) designed by Cynthia Brewer as described at <a href="http://colorbrewer2.org">http://colorbrewer2.org</a></p>
</li>
</ul>
<p>For initial step, Open RStudio and <strong>install the libraries above and load them</strong> by writing syntax:</p>
<pre><code>install.packages(&quot;tm&quot;)  
install.packages(&quot;SnowballC&quot;) 
install.packages(&quot;wordcloud&quot;) 
install.packages(&quot;RColorBrewer&quot;) 

library(&quot;tm&quot;)
library(&quot;SnowballC&quot;)
library(&quot;wordcloud&quot;)
library(&quot;RColorBrewer&quot;)
</code></pre><p>Then, <strong>determine the file directory path</strong> where we save the document, and <strong>read the dataset text</strong>.</p>
<pre><code>#Set the directory file
setwd(&quot;/Users/gandes.goldestan/Downloads/wordcloud&quot;)

#Read the dataset
berita &lt;- read.csv(&quot;finance.csv&quot;, header = TRUE,sep=&quot;;&quot;)
View(berita)
</code></pre><p>After that, we need to make Corpus. <strong>Corpus is the collection of written texts.</strong> In this project, I put the value for the maximum printed up to <strong>5000</strong> rows. Actually we can set the number to any value, and it doesn’t matter.</p>
<pre><code>docs &lt;- Corpus(VectorSource(berita[1:5000,1]))
inspect(docs)
</code></pre><p>The next step we do is <strong>transforming the texts with</strong> <code>tm_map</code> <strong>function</strong>. For example, we will replace
<code>&quot;/&quot;</code>, <code>&quot;@&quot;</code>, and <code>&quot;|&quot;</code> with spaces.</p>
<pre><code>toSpace &lt;- content_transformer(function(x, pattern) gsub(pattern, &quot; &quot;,x))
docs &lt;- tm_map(docs, toSpace, &quot;/&quot;)
docs &lt;- tm_map(docs, toSpace, &quot;@&quot;)
docs &lt;- tm_map(docs, toSpace, &quot;\\|&quot;)
docs &lt;- tm_map(docs, toSpace, &quot;https&quot;)
docs &lt;- tm_map(docs, toSpace, &quot;com&quot;)
</code></pre><p>We will continue to <strong>convert the texts to lowercase, remove the numbers, remove punctuations, eliminates excessive white space, and remove stopwords</strong>.</p>
<p>Stopwords are words which does not add much meaning to a sentence. They can safely be ignored without sacrificing the meaning of the sentence. Because the texts dataset we used are in Indonesian, so we also use stopwords text file in Indonesian.</p>
<pre><code>#Transform text to lowercase
docs  &lt;- tm_map(docs, content_transformer(tolower))

#Remove the numbers
docs &lt;- tm_map(docs, removeNumbers)

#Remove stopwords with &quot;stopwords_id.txt&quot;
stopwords_id &lt;- readLines(file.choose())
typeof(stopwords_id)
docs &lt;- tm_map(docs, removeWords, stopwords_id)

#Remove  punctuations
docs &lt;- tm_map(docs, removePunctuation)

#Eliminate excessive white spaces
docs &lt;- tm_map(docs, stripWhitespace)
</code></pre><p>After the document is prepared, we continue to create a <strong>Term-Document Matrix</strong>. Based on <a href="https://www.displayr.com/text-analysis-hooking-up-your-term-document-matrix-to-custom-r-code/">DisplayR</a> :</p>
<blockquote>
<p><em>&ldquo;A term document matrix is a way of representing the words in the text as a table (or matrix) of numbers. The rows of the matrix represent the text responses to be analysed, and the columns of the matrix represent the words from the text that are to be used in the analysis.&quot;</em></p>
</blockquote>
<p>A term-document matrix is an important representation for text analytics.</p>
<pre><code>dtm &lt;- TermDocumentMatrix(docs)
m &lt;- as.matrix(dtm)
v &lt;- sort(rowSums(m), decreasing = TRUE)
d &lt;- data.frame(word = names(v), freq = v)
head(d, 15)
</code></pre><p>Run the syntax above, and the matrix result will be shown like this:</p>
<figure>
    <img src="/images/tdm.png"/> <figcaption>
            <h4>Term-Document Matrix</h4>
        </figcaption>
</figure>

<p>Next, call the Word Cloud visualization by writing the syntax:</p>
<pre><code>set.seed(12)
windows()
wordcloud(words=d$word, freq = d$freq, min.freq = 100,
          max.words = 100, random.order = FALSE, rot.per = 0.35,
          colors = brewer.pal(8, &quot;Dark2&quot;))
</code></pre><p>Each parameter is explained below:</p>
<ul>
<li><code>words</code> = the words to be plotted</li>
<li><code>freq</code> = the frequency of each word</li>
<li><code>min.freq</code> = words with a frequency below min.freq will not be plotted</li>
<li><code>max.words</code> = the maximum number of words to be plotted</li>
<li><code>random.order</code> = plotting words in random order, otherwise FALSE</li>
<li><code>rot.per</code> = proportion of words with 90 degree rotation (vertical text)</li>
<li><code>colors</code> = word color from the least frequent to the most frequent</li>
</ul>
<p>Now, it shows the visualization of Word Cloud like an image below.</p>
<figure>
    <img src="/images/wordcloudss.png"/> <figcaption>
            <h4>Word Cloud Visualization</h4>
        </figcaption>
</figure>

<p>From the word cloud above we can see the top 3 of most frequent words are <strong>&ldquo;bank&rdquo;</strong>, <strong>&ldquo;twitter&rdquo;</strong>, and <strong>&ldquo;pemerintah&rdquo;</strong>.</p>
<p>We also can make a visualization of most frequent words in a bar graph using this syntax:</p>
<pre><code>windows()
barplot(d[1:10,]$freq, las=2, names.arg = d[1:10,]$word, 
        col = &quot;lightblue&quot;, main=&quot;Most frequent words&quot;, ylab = &quot;word frequencies&quot;)
</code></pre><p>Then, this is the output we get:</p>
<figure>
    <img src="/images/freq-words.png"/> <figcaption>
            <h4>Most Frequent Words</h4>
        </figcaption>
</figure>

<p>For the example of implementation, world cloud is one of interesting way to visualize about trending words/topic in social media and creating tags/categories in website. But, the weakness is we need to make time to clean up the data before processing and visualizing it so that we need the accurate result.</p>
<p>For the complete code and dataset, you can download or see them in my GitHub <a href="https://github.com/gandesgold/R-wordcloud">wordcloud repository</a>.</p>

        </div>

        
        
      </div>
    </div>
  </div>
</section>



<footer>
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-12 text-center mb-5">
        <a href="https://gandesgold.com"><img src="https://gandesgold.com/images/logo1.png" alt="Gandes Goldestan"></a>
      </div>
      
  
      
      <div class="col-12 border-top py-4 text-center">
        Copyright © 2020-2021 <a href="https://gandesgold.com">Gandes Goldestan</a> | All rights reserved
      </div>
    </div>
  </div>
</footer>

<script>
  var indexURL = "https://gandesgold.com/index.json"
</script>

<!-- JS Plugins -->

<script src="https://gandesgold.com/plugins/jQuery/jquery.min.js"></script>

<script src="https://gandesgold.com/plugins/bootstrap/bootstrap.min.js"></script>

<script src="https://gandesgold.com/plugins/slick/slick.min.js"></script>

<script src="https://gandesgold.com/plugins/venobox/venobox.min.js"></script>

<script src="https://gandesgold.com/plugins/search/fuse.min.js"></script>

<script src="https://gandesgold.com/plugins/search/mark.js"></script>

<script src="https://gandesgold.com/plugins/search/search.js"></script>

<!-- Main Script -->

<script src="https://gandesgold.com/js/script.min.js"></script>



</body>
</html>